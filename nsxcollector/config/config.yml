General:
  Name_Infra: "Lab Yann2"
  api_timeout: 10


Grafana:
  Dashboards:
    -
      name: 'NSX Managers'
      panels:
        -
          name: 'NSX Manager Status'
          panelfunction : "simplePanel"
          type: 'stat'
        -
          name: 'NSX Services Status'
          panelfunction : "simplePanel"
          type: 'table'
    -
      name: 'Edge Nodes'
      panels:
        -
          name: 'Edge interfaces stats'
          panelfunction : "Edge_Int_Panel"
          type: 'timeseries'
    -
      name: 'Transport Nodes'
      panels: []
    - 
      name: 'Overlay'
      panels: []
    -
      name: 'Security'
      panels: []


Monitoring_calls:
# Segments calls
    segments: 
      call: '/policy/api/v1/infra/segments'
      polling: 10
# Tier 0 calls
    t0: 
      call: '/policy/api/v1/infra/tier-0s'
      polling: 10
    t0_localservice:
      call: '/policy/api/v1/infra/tier-0s/RTRID/locale-services'
      polling: 10
    t0_interfaces:
      call: '/policy/api/v1/infra/tier-0s/RTRID/locale-services/LSID/interfaces'
      polling: 10
    t0_interfaces_stats: 
      call: '/policy/api/v1/infra/tier-0s/RTRID/locale-services/LSID/interfaces/INTID/statistics'
      polling: 10
      influxdbfunction: "t0_int_stats_data"
# Tier 1 calls
    t1: 
      call: '/policy/api/v1/infra/tier-1s'
      polling: 10
    t1_localservice: 
      call: '/policy/api/v1/infra/tier-1s/RTRID/locale-services'
      polling: 10
    t1_interfaces: 
      call: '/policy/api/v1/infra/tier-1s/RTRID/locale-services/LSID/interfaces'
      polling: 10
    t1_interfaces_stats: 
      call: '/policy/api/v1/infra/tier-1s/RTRID/locale-services/LSID/interfaces/INTID/statistics'
      polling: 10
# Transport nodes calls
    transport_nodes: 
      call: '/api/v1/transport-nodes'
      polling: 10
    tn_interfaces: 
      call: '/api/v1/transport-nodes/TNID/network/interfaces?source=realtime'
      polling: 10
    tn_interfaces_stats: 
      call: '/api/v1/transport-nodes/TNID/network/interfaces/INTID/stats?source=realtime'
      polling: 10
    tn_status: 
      call: /api/v1/transport-nodes/TNID/status
      polling: 10
# NSX Manager calls
    nsx_cluster_status: 
      call: /api/v1/cluster/status
      polling: 30
      influxdbfunction : "cluster_status_data"
    nsx_cluster_backup: 
      call: /policy/api/v1/cluster/backups/overview
      polling: 15
      influxdbfunction : "cluster_status_data"


# Component of NSX Infrastructure
# Component have 3 types : Manager, EdgeNode, HostNode
Component:
  Manager:
    fqdn: '10.168.165.188'
    port: '' 
    login: admin
    password: 'Admin!23Admin'
    # fqdn: 'localhost'
    # port: '21443' 
    # login: admin
    # password: 'VMware1!VMware1!'
    type: 'Manager'
    # Command can have 2 types : API or SSH
    # commands:
    #   -
    #     name: 'Manager CPU Process'
    #     type: 'API'
    #     call: ['/api/v1/systemhealth/appliances/process/status']
    #     datafunction: 'Manager_CPU_Process_Data'
    #     panelfunction: 'Manager_CPU_Process_Panel'
    #     polling: 30
    #   -
    #     name: 'Manager Cluster'
    #     type: 'API'
    #     call: ['/api/v1/cluster/status', '/policy/api/v1/cluster/backups/overview']
    #     datafunction: 'Manager_Cluster_Data'
    #     panelfunction: 'Manager_Cluster_Panel'
    #     polling: 15
      # -
      #   name: 'Status Transport Nodes'
      #   type: 'API'
      #   call: ['/api/v1/transport-nodes/ID/status?source=realtime']
      #   datafunction: 'TN_Status_Data'
      #   panelfunction: 'TN_Status_Panel'
      #   polling: 15

  Edge:
    login: 'admin'
    password: 'Admin!23Admin'
    type: 'EdgeNode'
    commands:
      # -
      #   name: 'Interfaces Stats'
      #   type: 'SSH'
      #   call: ['get logical-routers', 'get logical-router ID interfaces stats']
      #   datafunction: 'Edge_Int_Data'
      #   panelfunction: 'Edge_Int_Panel'
      #   polling: 10
      -
        name: 'Edges CPU'
        type: 'SSH'
        call: ['get cpu-stats']
        datafunction: 'Edge_CPU_Data'
        panelfunction: 'Edge_CPU_Panel'
        polling: 10
